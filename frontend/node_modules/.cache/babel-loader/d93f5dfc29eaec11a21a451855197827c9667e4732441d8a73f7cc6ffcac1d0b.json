{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Jismar/Desktop/Glitter/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/Jismar/Desktop/Glitter/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/Jismar/Desktop/Glitter/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import ListGroup from\"react-bootstrap/ListGroup\";import Button from\"react-bootstrap/Button\";import Card from\"react-bootstrap/Card\";import Col from\"react-bootstrap/esm/Col\";import Row from\"react-bootstrap/esm/Row\";import{Helmet}from\"react-helmet-async\";import{Link,useNavigate}from\"react-router-dom\";import MessageBox from\"../components/MessageBox\";import{useContext}from\"react\";import{Store}from\"../Store\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry, Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Shopping Cart\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Shopping Cart\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Cart is empty. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"Go Shopping\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:2,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ']}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),className:\"titleClass\",children:item.name})}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{className:\"buttonClass\",onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{className:\"buttonClass\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[\"$\",item.price]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{className:\"buttonClass\",onClick:function onClick(){return removeItemHandler(item);},children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"Subtotal (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"items) : $\",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0)]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",className:\"buttonClass\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Proceed to Checkout\"})})})]})})})})]})]});}","map":{"version":3,"names":["ListGroup","Button","Card","Col","Row","Helmet","Link","useNavigate","MessageBox","useContext","Store","axios","CartScreen","navigate","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","item","quantity","get","_id","data","countInStock","window","alert","type","payload","removeItemHandler","checkoutHandler","length","map","image","name","slug","price","reduce","a","c"],"sources":["C:/Users/Jismar/Desktop/Glitter/frontend/src/screens/CartScreen.js"],"sourcesContent":["import ListGroup from \"react-bootstrap/ListGroup\";\r\nimport Button from \"react-bootstrap/Button\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport Col from \"react-bootstrap/esm/Col\";\r\nimport Row from \"react-bootstrap/esm/Row\";\r\nimport { Helmet } from \"react-helmet-async\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport MessageBox from \"../components/MessageBox\";\r\nimport { useContext } from \"react\";\r\nimport { Store } from \"../Store\";\r\nimport axios from \"axios\";\r\n\r\nexport default function CartScreen() {\r\n    const navigate = useNavigate();\r\n    const { state, dispatch: ctxDispatch } = useContext(Store);\r\n    const {\r\n        cart: { cartItems },\r\n    } = state;\r\n\r\n    const updateCartHandler = async (item, quantity) => {\r\n        const { data } = await  axios.get(`api/products/${item._id}`);\r\n\r\n        if (data.countInStock < quantity) {\r\n            window.alert('Sorry, Product is out of stock');\r\n            return;\r\n        }\r\n\r\n        ctxDispatch({\r\n            type:'CART_ADD_ITEM',\r\n             payload: {...item, quantity},\r\n        });\r\n    };\r\n\r\n    const removeItemHandler = (item) => {\r\n        ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n    };\r\n\r\n    const checkoutHandler = () => {\r\n        navigate('/signin?redirect=/shipping');\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Helmet>\r\n                <title>Shopping Cart</title>\r\n            </Helmet>\r\n            <h1>Shopping Cart</h1>\r\n            <Row>\r\n        <Col md={8}>\r\n          {cartItems.length === 0 ? (\r\n            <MessageBox>\r\n              Cart is empty. <Link to=\"/\">Go Shopping</Link>\r\n            </MessageBox>\r\n          ) : (\r\n            <ListGroup>\r\n              {cartItems.map((item) => (\r\n                <ListGroup.Item key={item._id}>\r\n                  <Row className=\"align-items-center\">\r\n                    <Col md={2}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"img-fluid rounded img-thumbnail\"\r\n                      ></img>{' '}\r\n                    </Col>\r\n                    <Col md={2}>\r\n                        <Link to={`/product/${item.slug}`} className=\"titleClass\">{item.name}</Link>\r\n                    </Col>\r\n                    <Col md={3}>\r\n                      <Button className=\"buttonClass\" onClick={() => \r\n                      updateCartHandler(item, item.quantity - 1)\r\n                    } disabled={item.quantity === 1}>\r\n                        <i className=\"fas fa-minus-circle\"></i>\r\n                      </Button>{' '}\r\n                      <span>{item.quantity}</span>{' '}\r\n                      <Button\r\n                        className=\"buttonClass\"\r\n                        onClick={() => \r\n                            updateCartHandler(item, item.quantity + 1)\r\n                        }\r\n                        disabled={item.quantity === item.countInStock}\r\n                      >\r\n                        <i className=\"fas fa-plus-circle\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                    <Col md={3}>${item.price}</Col>\r\n                    <Col md={2}>\r\n                      <Button className=\"buttonClass\" onClick={() => removeItemHandler(item)} >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h3>\r\n                    Subtotal ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                    items) : $\r\n                    {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}\r\n                  </h3>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <div className=\"d-grid\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      className=\"buttonClass\"\r\n                      onClick={checkoutHandler}\r\n                      disabled={cartItems.length === 0}\r\n                    >\r\n                      Proceed to Checkout\r\n                    </Button>\r\n                  </div>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n        </div>\r\n    );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}